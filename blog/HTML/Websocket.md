---
title: Websocket
tags: ["H5","新特性", "Websocket"]
categories: ["H5", "新特性", "Websocket"]
---

## 简介

WebSocket 是 HTML5 开始提供的一种在单个 TCP 连接上进行全双工通讯的协议。

WebSocket 使得客户端和服务器之间的数据交换变得更加简单，允许服务端主动向客户端推送数据。在 WebSocket API 中，浏览器和服务器只需要完成一次握手，两者之间就直接可以创建持久性的连接，并进行双向数据传输。

在 WebSocket API 中，浏览器和服务器只需要做一个握手的动作，然后，浏览器和服务器之间就形成了一条快速通道。两者之间就直接可以数据互相传送。

## 相较于HTTP的优势

- 支持持久连接：建立连接之后可以随时发送数据，不需要再建立连接
- 低延迟：不需要客户端发送请求，就可以主动给客户端发送信息

## 缺点

- 不兼容低版本浏览器
- 受网络限制比较大，需要处理好重连

<!--more-->

## 适用场景

实时数据

## 属性

| 属性                  | 描述                                                         |
| --------------------- | ------------------------------------------------------------ |
| Socket.readyState     | 只读属性 **readyState** 表示连接状态，可以是以下值：                                                       0 - 表示连接尚未建立。                                                                                                        1 - 表示连接已建立，可以进行通信。                                                                                   2 - 表示连接正在进行关闭。                                                                                                3 - 表示连接已经关闭或者连接不能打开。 |
| Socket.bufferedAmount | 只读属性 **bufferedAmount** 已被 send() 放入正在队列中等待传输，但是还没有发出的 UTF-8 文本字节数。 |



## 事件

| 事件    | 事件处理程序     | 描述                       |
| ------- | ---------------- | -------------------------- |
| open    | Socket.onopen    | 连接建立时触发             |
| message | Socket.onmessage | 客户端接收服务端数据时触发 |
| error   | Socket.onerror   | 通信发生错误时触发         |
| close   | Socket.onclose   | 连接关闭时触发             |

## 方法

| 方法           | 描述             |
| -------------- | ---------------- |
| Socket.close() | 关闭连接         |
| Socket.send()  | 使用连接发送数据 |



## 实例

```html

```

