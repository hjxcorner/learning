---
title: 模块化
tags: ["js", "模块化"]
categories: ["JavaScript", "基础"]
---

## ES6模块化特点

1. 每个模块只**加载一次**，加载完可直接从内存中读取。（单例模式）
2. 每一个模块内声明的变量都是局部变量
3. 一个模块可以导入别的模块
4. 异步加载
5. ES6模块中的值属于动态只读引用(原始值发生变化，import加载的值也会发生变化)，当模块遇到import命令时，就会生成一个只读引用。等到脚本真正执行时，再根据这个只读引用，到被加载的那个模块里面去取值
6. 编译时加载(静态加载) --> import命令是编译阶段执行的，在代码运行之前
7. ES6 的模块自动采用严格模式
8. 虽然不能重新赋值一个新的对象，但是可以给对象添加属性和方法。此时不会报错。
9. import()函数 支持动态加载模块(运行时加载)

## CommonJS （服务端nodejs）模块化特点 

1. **同步加载**，加载完成之后才会执行后面的操作
2. 在模块内定义的变量，无法被其他模块读取，除非为global对象的属性
3. 模块只有一个出口，module.exports对象
4. 加载模块用require方法，该方法读取一个文件并执行，返回文件内部的module.exports对象

## AMD模块化特点

AMD是RequireJS在推广过程中对模块定义的规范化产出

AMD**异步加载模块**。它的模块支持对象、函数、构造器、字符串、JSON等各种类型的模块

## CMD模块化特点

CMD是SeaJS在推广过程中对模块定义的规范化产出

CMD和AMD的区别:

1. 对于以来的模块AMD是提前执行，CMD是延迟执行（懒加载），RequireJS2.0后ADM也可以改成延迟执行
2. CMD推崇依赖就近，AMD推崇依赖前置
3. AMD的api默认是一个当多个用，CMD严格区分推崇职责单一。

## UMD模块化特点

UMD是AMD和CommonJS的混合产物

## 区别

1. CommonJS 模块输出的是一个值的拷贝(会缓存)，ES6 模块输出的是值的引用(动态更新)。
2. CommonJS 模块是运行时加载，ES6 模块是编译时输出接口。
3. CommonJS 模块的require()是同步加载模块，ES6 模块的import命令是异步加载，有一个独立的模块依赖的解析阶段。

<!--more-->